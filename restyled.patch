From 0e1326deec4a5d730ce5fb0994f0898ba0013e5e Mon Sep 17 00:00:00 2001
From: "Restyled.io" <commits@restyled.io>
Date: Sun, 30 Nov 2025 10:28:22 +0000
Subject: [PATCH] Restyled by standardrb
---
 main.rb | 128 ++++++++++++++++++++++++++++----------------------------
 1 file changed, 64 insertions(+), 64 deletions(-)
diff --git a/main.rb b/main.rb
index a3e17af..9b306fc 100644
--- a/main.rb
+++ b/main.rb
@@ -1,7 +1,7 @@
 # frozen_string_literal: true
 
-require 'cask'
-require 'utils/pypi'
+require "cask"
+require "utils/pypi"
 
 class Object
   def false?
@@ -11,7 +11,7 @@ end
 
 class String
   def false?
-    empty? || strip == 'false'
+    empty? || strip == "false"
   end
 end
 
@@ -19,7 +19,7 @@ module Homebrew
   module_function
 
   def print_command(*cmd)
-    puts "[command]#{cmd.join(' ').gsub("\n", ' ')}"
+    puts "[command]#{cmd.join(" ").tr("\n", " ")}"
   end
 
   def brew(*args)
@@ -34,21 +34,21 @@ module Homebrew
 
   def read_brew(*args)
     print_command ENV["HOMEBREW_BREW_FILE"], *args
-    output = `#{ENV["HOMEBREW_BREW_FILE"]} #{args.join(' ')}`.chomp
+    output = `#{ENV["HOMEBREW_BREW_FILE"]} #{args.join(" ")}`.chomp
     odie output if $CHILD_STATUS.exitstatus != 0
     output
   end
 
   # Get inputs
-  message = ENV['HOMEBREW_BUMP_MESSAGE']
-  org = ENV['HOMEBREW_BUMP_ORG']
-  tap = ENV['HOMEBREW_BUMP_TAP']
-  cask = ENV['HOMEBREW_BUMP_CASK']
-  tag = ENV['HOMEBREW_BUMP_TAG']
-  revision = ENV['HOMEBREW_BUMP_REVISION']
-  force = ENV['HOMEBREW_BUMP_FORCE']
-  livecheck = ENV['HOMEBREW_BUMP_LIVECHECK']
-  dryrun = ENV['HOMEBREW_BUMP_DRYRUN']
+  message = ENV["HOMEBREW_BUMP_MESSAGE"]
+  org = ENV["HOMEBREW_BUMP_ORG"]
+  tap = ENV["HOMEBREW_BUMP_TAP"]
+  cask = ENV["HOMEBREW_BUMP_CASK"]
+  tag = ENV["HOMEBREW_BUMP_TAG"]
+  revision = ENV["HOMEBREW_BUMP_REVISION"]
+  force = ENV["HOMEBREW_BUMP_FORCE"]
+  livecheck = ENV["HOMEBREW_BUMP_LIVECHECK"]
+  dryrun = ENV["HOMEBREW_BUMP_DRYRUN"]
 
   # Check inputs
   if livecheck.false?
@@ -58,13 +58,13 @@ module Homebrew
 
   # Get user details
   user = GitHub::API.open_rest "#{GitHub::API_URL}/user"
-  user_id = user['id']
-  user_login = user['login']
-  user_name = user['name'] || user['login']
-  user_email = user['email'] || (
+  user_id = user["id"]
+  user_login = user["login"]
+  user_name = user["name"] || user["login"]
+  user_email = user["email"] || (
     # https://help.github.com/en/github/setting-up-and-managing-your-github-user-account/setting-your-commit-email-address
-    user_created_at = Date.parse user['created_at']
-    plus_after_date = Date.parse '2017-07-18'
+    user_created_at = Date.parse user["created_at"]
+    plus_after_date = Date.parse "2017-07-18"
     need_plus_email = (user_created_at - plus_after_date).positive?
     user_email = "#{user_login}@users.noreply.github.com"
     user_email = "#{user_id}+#{user_email}" if need_plus_email
@@ -72,31 +72,31 @@ module Homebrew
   )
 
   # Tell git who you are
-  git 'config', '--global', 'user.name', user_name
-  git 'config', '--global', 'user.email', user_email
+  git "config", "--global", "user.name", user_name
+  git "config", "--global", "user.email", user_email
 
   # Tap the tap if desired
-  brew 'tap', tap unless tap.blank?
+  brew "tap", tap unless tap.blank?
 
   # Append additional PR message
   message = if message.blank?
-              ''
-            else
-              message + "\n\n"
-            end
-  message += '[`homebrew-bump-cask`](https://github.com/LanikSJ/homebrew-bump-cask)'
+    ""
+  else
+    message + "\n\n"
+  end
+  message += "[`homebrew-bump-cask`](https://github.com/LanikSJ/homebrew-bump-cask)"
 
   # Do the livecheck stuff or not
   if livecheck.false?
     # Change cask name to full name
-    cask = tap + '/' + cask if !tap.blank? && !cask.blank?
+    cask = tap + "/" + cask if !tap.blank? && !cask.blank?
 
     # Get info about cask
     stable = cask[cask].stable
     is_git = stable.downloader.is_a? GitDownloadStrategy
 
     # Prepare tag and url
-    tag = tag.delete_prefix 'refs/tags/'
+    tag = tag.delete_prefix "refs/tags/"
     version = Version.parse tag
     url = stable.url.gsub stable.version, version
 
@@ -106,38 +106,38 @@ module Homebrew
       # Substitute url
       url = pypi_url
       # Install pipgrip utility so resources from PyPi get updated too
-      brew 'install', 'pipgrip'
+      brew "install", "pipgrip"
     end
 
     # Finally bump the cask
-    brew 'bump-cask-pr',
-         '--no-audit',
-         '--no-browse',
-         "--message=#{message}",
-         *("--fork-org=#{org}" unless org.blank?),
-         *("--version=#{version}" unless is_git),
-         *("--url=#{url}" unless is_git),
-         *("--tag=#{tag}" if is_git),
-         *("--revision=#{revision}" if is_git),
-         *('--force' unless force.false?),
-         *('--dry-run' unless dryrun.false?),
-         cask
+    brew "bump-cask-pr",
+      "--no-audit",
+      "--no-browse",
+      "--message=#{message}",
+      *("--fork-org=#{org}" unless org.blank?),
+      *("--version=#{version}" unless is_git),
+      *("--url=#{url}" unless is_git),
+      *("--tag=#{tag}" if is_git),
+      *("--revision=#{revision}" if is_git),
+      *("--force" unless force.false?),
+      *("--dry-run" unless dryrun.false?),
+      cask
   else
     # Support multiple casks in input and change to full names if tap
     unless cask.blank?
       cask = cask.split(/[ ,\n]/).reject(&:blank?)
-      cask = cask.map { |f| tap + '/' + f } unless tap.blank?
+      cask = cask.map { |f| tap + "/" + f } unless tap.blank?
     end
 
     # Get livecheck info
-    json = read_brew 'livecheck',
-                     '--cask',
-                     '--quiet',
-                     '--newer-only',
-                     '--full-name',
-                     '--json',
-                     *("--tap=#{tap}" if !tap.blank? && cask.blank?),
-                     *(cask unless cask.blank?)
+    json = read_brew "livecheck",
+      "--cask",
+      "--quiet",
+      "--newer-only",
+      "--full-name",
+      "--json",
+      *("--tap=#{tap}" if !tap.blank? && cask.blank?),
+      *(cask unless cask.blank?)
     json = JSON.parse json
 
     # Define error
@@ -146,23 +146,23 @@ module Homebrew
     # Loop over livecheck info
     json.each do |info|
       # Skip if there is no version field
-      next unless info['version']
+      next unless info["version"]
 
       # Get info about cask
-      cask = info['cask']
-      version = info['version']['latest']
+      cask = info["cask"]
+      version = info["version"]["latest"]
 
       begin
         # Finally bump the cask
-        brew 'bump-cask-pr',
-             '--no-audit',
-             '--no-browse',
-             "--message=#{message}",
-             "--version=#{version}",
-             *("--fork-org=#{org}" unless org.blank?),
-             *('--force' unless force.false?),
-             *('--dry-run' unless dryrun.false?),
-             cask
+        brew "bump-cask-pr",
+          "--no-audit",
+          "--no-browse",
+          "--message=#{message}",
+          "--version=#{version}",
+          *("--fork-org=#{org}" unless org.blank?),
+          *("--force" unless force.false?),
+          *("--dry-run" unless dryrun.false?),
+          cask
       rescue ErrorDuringExecution => e
         # Continue execution on error, but save the exeception
         err = e
-- 
2.51.2
